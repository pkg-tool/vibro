# Debugging Crashes

## Crashes

When an app crashes,

- macOS creates a `.ips` file in `~/Library/Logs/DiagnosticReports`. You can view these using the built in Console app (`cmd-space Console`) under "Crash Reports".
- Linux creates a core dump. See the [man pages](https://man7.org/linux/man-pages/man5/core.5.html) for pointers to how your system might be configured to manage core dumps.

These crash reports are generated by the crashing binary, and contain a wealth of information; but they are hard to read for a few reasons:

- They don't contain source files and line numbers
- The symbols are [mangled](https://doc.rust-lang.org/rustc/symbol-mangling/index.html)
- Inlined functions are elided

On macOS, to get a better sense of the backtrace of a crash you can download the `.ips` file locally and run:

```sh
./script/symbolicate ~/path/vector-XXX-XXX.ips
```

This will download the correct debug symbols from our public [DigitalOcean bucket](https://vector-debug-symbols.nyc3.digitaloceanspaces.com), and run [symbolicate](https://crates.io/crates/symbolicate) for you.

The output contains the source file and line number, and the demangled symbol information for every inlined frame.

## Panics

When the app panics at the rust level, Vector creates a file in `~/Library/Logs/Vector` or `$XDG_DATA_HOME/vector/logs` with the text of the panic, and a summary of the backtrace.

A panic is also considered a crash, and so for most panics we get both the crash report and the panic.

## Using a Debugger

If you can reproduce the crash consistently, a debugger can be used to inspect the state of the program at the time of the crash, often providing very useful insights into the cause of the crash.

You can read more about setting up and using a debugger with Vector, and specifically for debugging crashes [here](./debuggers.md#debugging-panics-and-crashes)
